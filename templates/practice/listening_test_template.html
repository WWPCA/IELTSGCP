{% extends "layout.html" %}

{% block content %}
<div class="container py-5">
    <div class="row">
        <div class="col-lg-8 mx-auto">
            <nav aria-label="breadcrumb">
                <ol class="breadcrumb">
                    <li class="breadcrumb-item"><a href="{{ url_for('practice_index') }}">Practice Tests</a></li>
                    <li class="breadcrumb-item">
                        <a href="{{ url_for('practice_test_list', test_type='listening') }}">Listening</a>
                    </li>
                    <li class="breadcrumb-item active" aria-current="page">{{ test.title }}</li>
                </ol>
            </nav>
            
            <!-- Timer Display -->
            <div id="test-timer" class="timer" data-test-type="listening">40:00</div>
            
            <!-- Test Content -->
            <div class="practice-test">
                <h1 class="mb-4">{{ test.title }}</h1>
                
                <div class="card mb-4">
                    <div class="card-header bg-primary text-white">
                        <h2 class="h4 mb-0">Listening Test Instructions</h2>
                    </div>
                    <div class="card-body">
                        <div class="alert alert-info">
                            <h4><i class="fas fa-info-circle me-2"></i> Test Format</h4>
                            <p>This IELTS Listening test consists of 4 sections with 10 questions each:</p>
                            <ol>
                                <li><strong>Section 1:</strong> A conversation between two people in an everyday social context</li>
                                <li><strong>Section 2:</strong> A monologue in an everyday social context</li>
                                <li><strong>Section 3:</strong> A conversation between up to four people in an educational context</li>
                                <li><strong>Section 4:</strong> A monologue on an academic subject</li>
                            </ol>
                            <p>You will have 40 minutes to complete the test (30 minutes listening + 10 minutes to transfer answers).</p>
                        </div>
                        
                        <div class="alert alert-warning">
                            <h4><i class="fas fa-exclamation-triangle me-2"></i> Audio Instructions</h4>
                            <p>Please download and use an external audio player to listen to the recording:</p>
                            <div class="text-center mt-3">
                                <a href="/static/{{ test.audio_url }}" download class="btn btn-lg btn-primary">
                                    <i class="fas fa-download me-2"></i> Download Audio File
                                </a>
                            </div>
                            <p class="mt-3"><strong>IMPORTANT:</strong> In the real IELTS test, you will hear the audio ONLY ONCE. For accurate practice, try to challenge yourself by listening only once.</p>
                        </div>
                    </div>
                </div>
                
                <form id="practice-test-form" data-test-id="{{ test.id }}" data-test-type="listening">
                    <!-- Section 1 -->
                    <div class="card mb-5">
                        <div class="card-header bg-secondary text-white">
                            <h3 class="h5 mb-0">Section 1: Social Conversation</h3>
                        </div>
                        <div class="card-body">
                            <div class="listening-context mb-4">
                                <p><strong>Questions 1-10</strong></p>
                                <p>Listen to a conversation between a customer and a rental agent about apartment options.</p>
                                <div class="listening-instructions">
                                    <p><strong>Complete the form below.</strong></p>
                                    <p>Write <strong>NO MORE THAN THREE WORDS AND/OR A NUMBER</strong> for each answer.</p>
                                </div>
                            </div>
                            
                            <!-- Questions will be added here -->
                            <div class="question-container">
                                <!-- Sample Form Completion Questions -->
                                <div class="form-completion-question">
                                    <h4 class="question-title mb-3">APARTMENT INQUIRY FORM</h4>
                                    <div class="form-group row mb-3">
                                        <label class="col-sm-6 col-form-label">1. Customer Name:</label>
                                        <div class="col-sm-6">
                                            <input type="text" class="form-control answer-input" data-question-id="1" placeholder="Your answer">
                                        </div>
                                    </div>
                                    
                                    <div class="form-group row mb-3">
                                        <label class="col-sm-6 col-form-label">2. Preferred Move-in Date:</label>
                                        <div class="col-sm-6">
                                            <input type="text" class="form-control answer-input" data-question-id="2" placeholder="Your answer">
                                        </div>
                                    </div>
                                    
                                    <div class="form-group row mb-3">
                                        <label class="col-sm-6 col-form-label">3. Maximum Budget:</label>
                                        <div class="col-sm-6">
                                            <input type="text" class="form-control answer-input" data-question-id="3" placeholder="Your answer">
                                        </div>
                                    </div>
                                    
                                    <div class="form-group row mb-3">
                                        <label class="col-sm-6 col-form-label">4. Preferred Location:</label>
                                        <div class="col-sm-6">
                                            <input type="text" class="form-control answer-input" data-question-id="4" placeholder="Your answer">
                                        </div>
                                    </div>
                                    
                                    <div class="form-group row mb-3">
                                        <label class="col-sm-6 col-form-label">5. Number of Bedrooms:</label>
                                        <div class="col-sm-6">
                                            <input type="text" class="form-control answer-input" data-question-id="5" placeholder="Your answer">
                                        </div>
                                    </div>
                                    
                                    <div class="form-group row mb-3">
                                        <label class="col-sm-6 col-form-label">6. Additional Requirement:</label>
                                        <div class="col-sm-6">
                                            <input type="text" class="form-control answer-input" data-question-id="6" placeholder="Your answer">
                                        </div>
                                    </div>
                                    
                                    <div class="form-group row mb-3">
                                        <label class="col-sm-6 col-form-label">7. Property #1 Address:</label>
                                        <div class="col-sm-6">
                                            <input type="text" class="form-control answer-input" data-question-id="7" placeholder="Your answer">
                                        </div>
                                    </div>
                                    
                                    <div class="form-group row mb-3">
                                        <label class="col-sm-6 col-form-label">8. Property #1 Monthly Rent:</label>
                                        <div class="col-sm-6">
                                            <input type="text" class="form-control answer-input" data-question-id="8" placeholder="Your answer">
                                        </div>
                                    </div>
                                    
                                    <div class="form-group row mb-3">
                                        <label class="col-sm-6 col-form-label">9. Property #2 Available From:</label>
                                        <div class="col-sm-6">
                                            <input type="text" class="form-control answer-input" data-question-id="9" placeholder="Your answer">
                                        </div>
                                    </div>
                                    
                                    <div class="form-group row mb-3">
                                        <label class="col-sm-6 col-form-label">10. Viewing Appointment Time:</label>
                                        <div class="col-sm-6">
                                            <input type="text" class="form-control answer-input" data-question-id="10" placeholder="Your answer">
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Section 2 -->
                    <div class="card mb-5">
                        <div class="card-header bg-secondary text-white">
                            <h3 class="h5 mb-0">Section 2: Social Monologue</h3>
                        </div>
                        <div class="card-body">
                            <div class="listening-context mb-4">
                                <p><strong>Questions 11-20</strong></p>
                                <p>Listen to a presentation about a local community center's facilities and programs.</p>
                                <div class="listening-instructions">
                                    <p><strong>Complete the table below.</strong></p>
                                    <p>Write <strong>NO MORE THAN TWO WORDS AND/OR A NUMBER</strong> for each answer.</p>
                                </div>
                            </div>
                            
                            <!-- Questions will be added here -->
                            <div class="question-container">
                                <!-- Sample Table Completion Questions -->
                                <div class="table-completion-question">
                                    <h4 class="question-title mb-3">COMMUNITY CENTER FACILITIES</h4>
                                    <div class="table-responsive">
                                        <table class="table table-bordered">
                                            <thead>
                                                <tr>
                                                    <th>Facility</th>
                                                    <th>Location</th>
                                                    <th>Opening Hours</th>
                                                    <th>Special Features</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                <tr>
                                                    <td>Main Hall</td>
                                                    <td>Ground Floor</td>
                                                    <td>
                                                        <div class="form-group mb-0">
                                                            <input type="text" class="form-control answer-input" data-question-id="11" placeholder="Your answer">
                                                        </div>
                                                    </td>
                                                    <td>Capacity: 200 people</td>
                                                </tr>
                                                <tr>
                                                    <td>
                                                        <div class="form-group mb-0">
                                                            <input type="text" class="form-control answer-input" data-question-id="12" placeholder="Your answer">
                                                        </div>
                                                    </td>
                                                    <td>First Floor</td>
                                                    <td>9am - 8pm</td>
                                                    <td>New computers</td>
                                                </tr>
                                                <tr>
                                                    <td>Cafe</td>
                                                    <td>
                                                        <div class="form-group mb-0">
                                                            <input type="text" class="form-control answer-input" data-question-id="13" placeholder="Your answer">
                                                        </div>
                                                    </td>
                                                    <td>8am - 6pm</td>
                                                    <td>Serves homemade food</td>
                                                </tr>
                                                <tr>
                                                    <td>Sports Area</td>
                                                    <td>Behind building</td>
                                                    <td>10am - 9pm</td>
                                                    <td>
                                                        <div class="form-group mb-0">
                                                            <input type="text" class="form-control answer-input" data-question-id="14" placeholder="Your answer">
                                                        </div>
                                                    </td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                    
                                    <h4 class="question-title mb-3 mt-4">WEEKLY PROGRAMS</h4>
                                    <div class="table-responsive">
                                        <table class="table table-bordered">
                                            <thead>
                                                <tr>
                                                    <th>Day</th>
                                                    <th>Program</th>
                                                    <th>Time</th>
                                                    <th>Cost</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                <tr>
                                                    <td>Monday</td>
                                                    <td>
                                                        <div class="form-group mb-0">
                                                            <input type="text" class="form-control answer-input" data-question-id="15" placeholder="Your answer">
                                                        </div>
                                                    </td>
                                                    <td>10am - 12pm</td>
                                                    <td>$5 per session</td>
                                                </tr>
                                                <tr>
                                                    <td>Tuesday</td>
                                                    <td>Language Exchange</td>
                                                    <td>
                                                        <div class="form-group mb-0">
                                                            <input type="text" class="form-control answer-input" data-question-id="16" placeholder="Your answer">
                                                        </div>
                                                    </td>
                                                    <td>Free</td>
                                                </tr>
                                                <tr>
                                                    <td>
                                                        <div class="form-group mb-0">
                                                            <input type="text" class="form-control answer-input" data-question-id="17" placeholder="Your answer">
                                                        </div>
                                                    </td>
                                                    <td>Youth Club</td>
                                                    <td>4pm - 7pm</td>
                                                    <td>$2 per session</td>
                                                </tr>
                                                <tr>
                                                    <td>Thursday</td>
                                                    <td>Cooking Class</td>
                                                    <td>6pm - 8pm</td>
                                                    <td>
                                                        <div class="form-group mb-0">
                                                            <input type="text" class="form-control answer-input" data-question-id="18" placeholder="Your answer">
                                                        </div>
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td>Friday</td>
                                                    <td>Film Night</td>
                                                    <td>7pm - 9pm</td>
                                                    <td>
                                                        <div class="form-group mb-0">
                                                            <input type="text" class="form-control answer-input" data-question-id="19" placeholder="Your answer">
                                                        </div>
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td>Weekend</td>
                                                    <td>
                                                        <div class="form-group mb-0">
                                                            <input type="text" class="form-control answer-input" data-question-id="20" placeholder="Your answer">
                                                        </div>
                                                    </td>
                                                    <td>Various</td>
                                                    <td>Various</td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Section 3 -->
                    <div class="card mb-5">
                        <div class="card-header bg-secondary text-white">
                            <h3 class="h5 mb-0">Section 3: Educational Conversation</h3>
                        </div>
                        <div class="card-body">
                            <div class="listening-context mb-4">
                                <p><strong>Questions 21-30</strong></p>
                                <p>Listen to a conversation between a student and a professor about a research project.</p>
                                <div class="listening-instructions">
                                    <p><strong>Choose the correct letter, A, B, or C.</strong></p>
                                </div>
                            </div>
                            
                            <!-- Questions will be added here -->
                            <div class="question-container">
                                <!-- Sample Multiple Choice Questions -->
                                <div class="multiple-choice-questions">
                                    <div class="question mb-4">
                                        <p class="question-text">21. The student's research project focuses on:</p>
                                        <div class="form-check">
                                            <input class="form-check-input" type="radio" name="question21" id="q21a" value="A" data-question-id="21">
                                            <label class="form-check-label" for="q21a">A. Marine pollution</label>
                                        </div>
                                        <div class="form-check">
                                            <input class="form-check-input" type="radio" name="question21" id="q21b" value="B" data-question-id="21">
                                            <label class="form-check-label" for="q21b">B. Climate change effects</label>
                                        </div>
                                        <div class="form-check">
                                            <input class="form-check-input" type="radio" name="question21" id="q21c" value="C" data-question-id="21">
                                            <label class="form-check-label" for="q21c">C. Coastal erosion</label>
                                        </div>
                                    </div>
                                    
                                    <div class="question mb-4">
                                        <p class="question-text">22. The professor suggests that the student should:</p>
                                        <div class="form-check">
                                            <input class="form-check-input" type="radio" name="question22" id="q22a" value="A" data-question-id="22">
                                            <label class="form-check-label" for="q22a">A. Narrow the research focus</label>
                                        </div>
                                        <div class="form-check">
                                            <input class="form-check-input" type="radio" name="question22" id="q22b" value="B" data-question-id="22">
                                            <label class="form-check-label" for="q22b">B. Change the research topic</label>
                                        </div>
                                        <div class="form-check">
                                            <input class="form-check-input" type="radio" name="question22" id="q22c" value="C" data-question-id="22">
                                            <label class="form-check-label" for="q22c">C. Expand the research scope</label>
                                        </div>
                                    </div>
                                    
                                    <div class="question mb-4">
                                        <p class="question-text">23. According to the professor, the most reliable research data comes from:</p>
                                        <div class="form-check">
                                            <input class="form-check-input" type="radio" name="question23" id="q23a" value="A" data-question-id="23">
                                            <label class="form-check-label" for="q23a">A. Government reports</label>
                                        </div>
                                        <div class="form-check">
                                            <input class="form-check-input" type="radio" name="question23" id="q23b" value="B" data-question-id="23">
                                            <label class="form-check-label" for="q23b">B. Peer-reviewed journals</label>
                                        </div>
                                        <div class="form-check">
                                            <input class="form-check-input" type="radio" name="question23" id="q23c" value="C" data-question-id="23">
                                            <label class="form-check-label" for="q23c">C. Industry publications</label>
                                        </div>
                                    </div>
                                    
                                    <div class="question mb-4">
                                        <p class="question-text">24. The deadline for the first draft of the research is:</p>
                                        <div class="form-check">
                                            <input class="form-check-input" type="radio" name="question24" id="q24a" value="A" data-question-id="24">
                                            <label class="form-check-label" for="q24a">A. Next week</label>
                                        </div>
                                        <div class="form-check">
                                            <input class="form-check-input" type="radio" name="question24" id="q24b" value="B" data-question-id="24">
                                            <label class="form-check-label" for="q24b">B. In two weeks</label>
                                        </div>
                                        <div class="form-check">
                                            <input class="form-check-input" type="radio" name="question24" id="q24c" value="C" data-question-id="24">
                                            <label class="form-check-label" for="q24c">C. In one month</label>
                                        </div>
                                    </div>
                                    
                                    <div class="question mb-4">
                                        <p class="question-text">25. The student's main concern about the project is the:</p>
                                        <div class="form-check">
                                            <input class="form-check-input" type="radio" name="question25" id="q25a" value="A" data-question-id="25">
                                            <label class="form-check-label" for="q25a">A. Word count requirement</label>
                                        </div>
                                        <div class="form-check">
                                            <input class="form-check-input" type="radio" name="question25" id="q25b" value="B" data-question-id="25">
                                            <label class="form-check-label" for="q25b">B. Data analysis process</label>
                                        </div>
                                        <div class="form-check">
                                            <input class="form-check-input" type="radio" name="question25" id="q25c" value="C" data-question-id="25">
                                            <label class="form-check-label" for="q25c">C. Presentation format</label>
                                        </div>
                                    </div>
                                </div>
                                
                                <!-- Sample Matching Questions -->
                                <div class="matching-questions mt-5">
                                    <div class="listening-instructions mb-4">
                                        <p><strong>Match each research phase with the correct timeline.</strong></p>
                                        <p>Choose the correct letter, A-G.</p>
                                    </div>
                                    
                                    <div class="row">
                                        <div class="col-md-6">
                                            <div class="list-group">
                                                <div class="list-group-item list-group-item-info">Research Phases</div>
                                                <div class="list-group-item">26. Literature review</div>
                                                <div class="list-group-item">27. Data collection</div>
                                                <div class="list-group-item">28. Data analysis</div>
                                                <div class="list-group-item">29. Draft preparation</div>
                                                <div class="list-group-item">30. Final submission</div>
                                            </div>
                                        </div>
                                        
                                        <div class="col-md-6">
                                            <div class="list-group">
                                                <div class="list-group-item list-group-item-info">Timeline Options</div>
                                                <div class="list-group-item">A. Weeks 1-2</div>
                                                <div class="list-group-item">B. Weeks 3-5</div>
                                                <div class="list-group-item">C. Weeks 6-7</div>
                                                <div class="list-group-item">D. Weeks 8-9</div>
                                                <div class="list-group-item">E. Week 10</div>
                                                <div class="list-group-item">F. Week 11</div>
                                                <div class="list-group-item">G. Week 12</div>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <div class="row mt-3">
                                        <div class="col-md-10 mx-auto">
                                            <div class="form-group row mb-3">
                                                <label class="col-sm-6 col-form-label">26. Literature review:</label>
                                                <div class="col-sm-6">
                                                    <input type="text" class="form-control answer-input" data-question-id="26" placeholder="Enter letter (A-G)">
                                                </div>
                                            </div>
                                            
                                            <div class="form-group row mb-3">
                                                <label class="col-sm-6 col-form-label">27. Data collection:</label>
                                                <div class="col-sm-6">
                                                    <input type="text" class="form-control answer-input" data-question-id="27" placeholder="Enter letter (A-G)">
                                                </div>
                                            </div>
                                            
                                            <div class="form-group row mb-3">
                                                <label class="col-sm-6 col-form-label">28. Data analysis:</label>
                                                <div class="col-sm-6">
                                                    <input type="text" class="form-control answer-input" data-question-id="28" placeholder="Enter letter (A-G)">
                                                </div>
                                            </div>
                                            
                                            <div class="form-group row mb-3">
                                                <label class="col-sm-6 col-form-label">29. Draft preparation:</label>
                                                <div class="col-sm-6">
                                                    <input type="text" class="form-control answer-input" data-question-id="29" placeholder="Enter letter (A-G)">
                                                </div>
                                            </div>
                                            
                                            <div class="form-group row mb-3">
                                                <label class="col-sm-6 col-form-label">30. Final submission:</label>
                                                <div class="col-sm-6">
                                                    <input type="text" class="form-control answer-input" data-question-id="30" placeholder="Enter letter (A-G)">
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Section 4 -->
                    <div class="card mb-5">
                        <div class="card-header bg-secondary text-white">
                            <h3 class="h5 mb-0">Section 4: Academic Monologue</h3>
                        </div>
                        <div class="card-body">
                            <div class="listening-context mb-4">
                                <p><strong>Questions 31-40</strong></p>
                                <p>Listen to a lecture about renewable energy developments.</p>
                                <div class="listening-instructions">
                                    <p><strong>Complete the notes below.</strong></p>
                                    <p>Write <strong>NO MORE THAN TWO WORDS</strong> for each answer.</p>
                                </div>
                            </div>
                            
                            <!-- Questions will be added here -->
                            <div class="question-container">
                                <!-- Sample Notes Completion Questions -->
                                <div class="notes-completion-question">
                                    <h4 class="question-title mb-3">RENEWABLE ENERGY LECTURE NOTES</h4>
                                    
                                    <div class="lecture-notes">
                                        <div class="mb-4">
                                            <h5>Solar Energy</h5>
                                            <ul>
                                                <li>Most popular renewable energy source globally</li>
                                                <li>Recent technological advancements have improved 
                                                    <div class="d-inline-block" style="min-width: 150px;">
                                                        <input type="text" class="form-control answer-input" data-question-id="31" placeholder="Your answer">
                                                    </div>
                                                     by 40%
                                                </li>
                                                <li>Major challenge: energy storage during 
                                                    <div class="d-inline-block" style="min-width: 150px;">
                                                        <input type="text" class="form-control answer-input" data-question-id="32" placeholder="Your answer">
                                                    </div>
                                                </li>
                                                <li>New solar farm in Australia will power over 
                                                    <div class="d-inline-block" style="min-width: 150px;">
                                                        <input type="text" class="form-control answer-input" data-question-id="33" placeholder="Your answer">
                                                    </div>
                                                     homes
                                                </li>
                                            </ul>
                                        </div>
                                        
                                        <div class="mb-4">
                                            <h5>Wind Energy</h5>
                                            <ul>
                                                <li>Offshore wind farms have 
                                                    <div class="d-inline-block" style="min-width: 150px;">
                                                        <input type="text" class="form-control answer-input" data-question-id="34" placeholder="Your answer">
                                                    </div>
                                                     advantages over land-based ones
                                                </li>
                                                <li>New turbine designs reduce impact on 
                                                    <div class="d-inline-block" style="min-width: 150px;">
                                                        <input type="text" class="form-control answer-input" data-question-id="35" placeholder="Your answer">
                                                    </div>
                                                </li>
                                                <li>Researchers developing more efficient 
                                                    <div class="d-inline-block" style="min-width: 150px;">
                                                        <input type="text" class="form-control answer-input" data-question-id="36" placeholder="Your answer">
                                                    </div>
                                                     systems
                                                </li>
                                            </ul>
                                        </div>
                                        
                                        <div class="mb-4">
                                            <h5>Hydroelectric Power</h5>
                                            <ul>
                                                <li>Traditional dams can cause environmental 
                                                    <div class="d-inline-block" style="min-width: 150px;">
                                                        <input type="text" class="form-control answer-input" data-question-id="37" placeholder="Your answer">
                                                    </div>
                                                </li>
                                                <li>New "run-of-river" systems have less impact on 
                                                    <div class="d-inline-block" style="min-width: 150px;">
                                                        <input type="text" class="form-control answer-input" data-question-id="38" placeholder="Your answer">
                                                    </div>
                                                </li>
                                            </ul>
                                        </div>
                                        
                                        <div class="mb-4">
                                            <h5>Future Developments</h5>
                                            <ul>
                                                <li>Integration of AI to improve energy 
                                                    <div class="d-inline-block" style="min-width: 150px;">
                                                        <input type="text" class="form-control answer-input" data-question-id="39" placeholder="Your answer">
                                                    </div>
                                                </li>
                                                <li>Government incentives for 
                                                    <div class="d-inline-block" style="min-width: 150px;">
                                                        <input type="text" class="form-control answer-input" data-question-id="40" placeholder="Your answer">
                                                    </div>
                                                     energy adoption
                                                </li>
                                            </ul>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Submit Button -->
                    <div class="d-grid">
                        <button type="submit" class="btn btn-primary btn-lg">Submit Answers</button>
                    </div>
                </form>
                
                <div id="test-results" class="mt-5"></div>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block scripts %}
<script>
// Any additional JavaScript for the listening test can go here
</script>
{% endblock %}